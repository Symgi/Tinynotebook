CKEDITOR.dialog.add("tweetabletextDialog",function(d){return{title:"TweetableText Properties",minWidth:400,minHeight:200,contents:[{id:"tab-basic",label:"Basic Settings",elements:[{type:"text",id:"displaytext",label:"Display Text",validate:CKEDITOR.dialog.validate.notEmpty("Display Text field can not be empty."),setup:function(a){this.setValue(a.getText())},commit:function(a){a.setText(this.getValue())}},{type:"text",id:"tweetabletext",label:"Tweetable Text",validate:CKEDITOR.dialog.validate.notEmpty("Tweetable Text field can not be empty."),
setup:function(a){a=a.getAttribute("href").split("?")[1].split("=");this.setValue(decodeURI(a[1]))},commit:function(a){var b="http://twitter.com/intent/tweet?",c=encodeURI(this.getValue()),b=b+("text="+c);a.setAttribute("href",b);a.setAttribute("data-cke-saved-href",b)}}]}],onShow:function(){var a=d.getSelection().getStartElement();"tweetabletext"!==a.getAttribute("class")?(a=d.document.createElement("a"),this.insertMode=!0):this.insertMode=!1;this.element=a;this.insertMode||this.setupContent(this.element)},
onOk:function(){var a=this.element,b=this.getValueOf("tab-basic","displaytext"),c=this.getValueOf("tab-basic","tweetabletext"),c=encodeURI(c),f="http://twitter.com/intent/tweet?",e=d.document.createElement("a");e.setAttribute("class","tweetabletext");e.setAttribute("href",f+("text="+c));e.setText(b);this.commitContent(a);this.insertMode&&d.insertElement(e)}}});